<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no'>
  <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css' integrity='sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ' crossorigin='anonymous'>
  <script src='https://code.jquery.com/jquery-3.1.1.slim.min.js' integrity='sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n' crossorigin='anonymous'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js' integrity='sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb' crossorigin='anonymous'></script>
  <script src='https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js' integrity='sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn' crossorigin='anonymous'></script>

  <link href='https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css' rel='stylesheet'>
  <script src='https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js'></script>
  <title>LED Controller WS2812B</title>

</head>
<body>
  <div class='container'>
    <div class='jumbtron'>
      <h1 class='display-4'>WS2812B LED controller</h1>
       <p class='lead'>LED Stripe controller on ESP8266</p>
       <hr class='my-4'>
    </div>
    <div class='row'>
      <div class='col-md-6 mt-3'>
        <div class='card'>
          <h4 class='card-header'>Color</h4>
          <div class='card-block'>
            <form action='./setcolor' method='get' class='form-horizontal'>
            <div class='form-group'>
              <label class='col-2'>Red:</label>
              <div class='col-10'>
                <input type='number' min='0' max='255' class='form-control RGBInput' id='redInput' name='red' placeholder='Enter 0 - 255'>
              </div>
            </div>
            <div class='form-group'>
              <label class='col-2'>Green:</label>
              <div class='col-10'>
                <input type='number' min='0' max='255' class='form-control RGBInput' id='greenInput' name='green' placeholder='Enter 0 - 255'>
              </div>
            </div>
            <div class='form-group'>
              <label class='col-2'>Blue:</label>
              <div class='col-10'>
                <input type='number' min='0' max='255' class='form-control RGBInput' id='blueInput' name='blue' placeholder='Enter 0 - 255'>
              </div>
            </div>
            <div class='form-group'>
              <label class='col-2'>Color</label>
              <div class='col-10'>
                <input style='height:38px' class='form-control' type='color' id='colorWheel' value='#FFFFFF'>
              </div>
            </div>
            <div class='form-group'>
              <div class='col-10'>
                <button type='submit' class='btn btn-primary btn-block'>Submit</button>
              </div>
            </div>
          </form>
          </div>
        </div>
      </div>
      <div class='col-md-6'>
        <div class='row mt-3'>
          <div class='col-12'>
            <div class='card'>
              <h4 class='card-header'>Control</h4>
              <div class='card-block'>
                <form action='./setcolor' method='get' class='form-horizontal'>
                <div class='form-group'>
                  <label class='col-2'>Start/Stop: </label>
                  <div class='col-10'>
                    <input id='startCheckBox' type='checkbox' checked data-toggle='toggle'>
                  </div>
                </div>
              </form>
              </div>
            </div>
          </div>
          </div>
          <div class='row mt-3'>
            <div class='col-12'>
              <div class='card'>
                <h4 class='card-header'>Mode</h4>
                <div class='card-block'>
                  <form action='./setcolor' method='get' class='form-horizontal'>
                    <div class='list-group'>
                      <input id='modeInput' type='hidden' name='mode' value='1'>
                      <a href='#' id='mode1' class='list-group-item list-group-item-action '>Color Wipe</a>
                      <a href='#' id='mode2' class='list-group-item list-group-item-action '>Set Fire to the rain!</a>
                      <a href='#' id='mode3' class='list-group-item list-group-item-action '>Rainbow cycle</a>
                      <a href='#' id='mode4' class='list-group-item list-group-item-action '>Snow sparkle</a>
                      <a href='#' id='mode5' class='list-group-item list-group-item-action '>Twinkle</a>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
      </div>
    </div>
    <div class='row mt-3'>
      <div class='col-12'>
        <p>powered by snn2spade, 2017</p>
      </div>
    </div>
  </div>
  <script type='text/javascript' language='javascript'>
    function toHex(d) {
        return ('0'+(Number(d).toString(16))).slice(-2).toUpperCase()
    }
    $( '.RGBInput' ).change(function() {
      let string = '#';
      string = string + toHex($('#redInput').val());
      string = string + toHex($('#greenInput').val());
      string = string + toHex($('#blueInput').val());
      console.log(string);
      $('#colorWheel').val(string);
    });
    $( '#colorWheel' ).change(function() {
      let string = $('#colorWheel').val();
      string = string.toUpperCase();
      let redDec = parseInt(string.substr(1,2),16);
      let greenDec = parseInt(string.substr(3,2),16);
      let blueDec = parseInt(string.substr(5,2),16);
      $('#redInput').val(redDec);
      $('#greenInput').val(greenDec);
      $('#blueInput').val(blueDec);
    });
    $('form').submit(function () {
      //alert('Send completed.');
    });
    window.onload = function(){
      let mode = $('#modeInput').val();
      mode = parseInt(mode);
      console.log("mode:"+mode)
      switch(mode){
        case 1:
          $('#mode1').addClass('active');
          break;
        case 2:
          $('#mode2').addClass('active');
          break;
        case 3:
          $('#mode3').addClass('active');
          break;
        case 4:
          $('#mode4').addClass('active');
          break;
        case 5:
          $('#mode5').addClass('active');
          break;
      }
    };
  </script>
</body>
</html>
